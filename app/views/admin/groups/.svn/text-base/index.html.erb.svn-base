<!-- Container Start -->
<div class="content">
    <%= render :partial => "top_nav" %>
    <h1>Groups - Generic Report</h1>
    <form id="form1" name="form1" method="post" action="">
        <table border="0" cellpadding="5" cellspacing="0" id="mytable01">
            <tr>
                <td colspan="2">
                    <ul class="admtot">
                        <li>
                            Total Groups:&nbsp;<%= @group_count %>
                        </li>
                         <li>
                            Total Views:&nbsp;<%= @views_count %>
                        </li>
                    </ul>
                </td>
            </tr>
        </table>
    </form>
    <br/>
    <p style="float:right;">
        <%= link_to "Download Report",:controller => "admin/groups",:action => "download" %>
    </p>
    <br/><div class="clear">&nbsp;</div>
    <div class="demo_jui">
        <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
            <thead>
                <tr class="dataTable">
                    <th width="15%">
                        Group Name
                    </th>
                    <th width="15%">
                        Owner
                    </th>
                    <th width="10%">
                        Date
                    </th>
                    <th width="10%">
                        Type
                    </th>
                    <th width="10%">
                        Members
                    </th>
                    <th width="10%">
                        Abuse Report
                    </th>
                    <th width="15%">
                        Status
                    </th>
                </tr>
            </thead>
            <tbody>
                <% unless @group.length == 0 %>
                <% @group.each do |l| %>
                <tr class="dataTable">
                    <td>
                         <!--<a target = "_blank" href="/group/<%= l.permalink %>"><%=get_name(l.name,50)%></a>&nbsp;|&nbsp; -->
                         <a onclick="return hs.htmlExpand(this, { objectType:'ajax',outlineType:'rounded-white',width:500,height:550},'Group Details' )" href="/admin/groups/details/<%=l.id%>"><%=get_name(l.name,50)%></a>&nbsp;|&nbsp;
						 <%= link_to  "View Stats"  ,:controller=>"admin/groups", :action => :report,:id => l.id %>&nbsp;|&nbsp;
                                                 <%= link_to  "Delete"  ,{:controller=>"admin/groups", :action => :delete,:id => l.id},:confirm=>"Are you sure you want to delete this group?" %>
                   </td>
                    <td align="center">
                          <%=link_to get_name(l.owner.login) ,my_page_path(:user_id => l.owner.id), :popup => true%>
                        <!-- <a href="#"><%= get_name(l.owner.login) %></a> -->
                    </td>
                    <td align="center">
                        <%= l.created_at.strftime("%d %b %Y") %>
                    </td>
					<td align="center">
                        <%= l.group_type %>
                    </td>
					<td align="center">
                        <%= l.group_memberships.length %>
                    </td>
					 <td align="center">
                       <%= @abuse[l.id].nil? ? "-" : @abuse[l.id].length  %>
                    </td>
                    <td align="center">
                        <label>
                            <%= radio_button_tag "group#{l.id}","enabled",l.status.to_i == 1,:onclick =>  remote_function(:url => {:controller => "admin/groups",:action => "update_status",:id => l.id,:status => 1}) %>Active
                        </label>
                        <label>
                            <%= radio_button_tag "group#{l.id}","disabled",l.status.to_i == 0,:onclick =>  remote_function(:url => {:controller => "admin/groups",:action => "update_status",:id => l.id,:status => 0}) %>Deactive
                        </label>
                    </td>
				</tr>
                <% end %>
                <% end %>
            </tbody>
        </table>
    </div>
    
    <div id="chartdiv" align="center">
    </div>
    <script type="text/javascript">
        /*
         var chart = new FusionCharts("Charts/FCF_MSColumn3D.swf", "ChartId", "800", "450");
         chart.setDataURL("Data/groupCenterReport.xml");
         chart.render("chartdiv");
         */
    </script>
</div>
<!-- Container End -->
